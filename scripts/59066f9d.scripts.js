!function(){"use strict";var a,b;a="/api_mock",b=angular.module("NextBBSWebApp",["ui.router","ngCookies","pascalprecht.translate"]),b.config(["$stateProvider","$routeProvider","$urlRouterProvider","$translateProvider",function(a,b,c,d){return c.when("/p?id","/p/:id").when("/b?id","/b/:id").when("/b/","/board").when("/u?id","/user/:id").otherwise("/"),b.when("/user/:id",{redirectTo:"/posts/:id"}),a.state("root",{url:"/","abstract":!0,templateUrl:"views/layout.html"}).state("root.nav",{url:"",views:{nav:{templateUrl:"views/nav.html",controller:"NavCtrl"},"":{templateUrl:"views/home.html"}}}).state("root.nav.board_index",{url:"board",views:{"@root":{templateUrl:"views/board.html"}}}).state("root.nav.board",{url:"b/:boardId","abstract":!0,views:{"@root":{templateUrl:"views/layout_board.html"}}}).state("root.nav.board.list",{url:"",views:{list:{templateUrl:"views/list.html",resolve:{posts:["posts",function(a){return a.all()}]},controller:"ListCtrl"},"":{templateUrl:"views/board_home.html"}}}).state("root.nav.board.list.post",{url:"/p/:postId",views:{"@root.nav.board":{templateUrl:"views/post.html",controller:"ContentCtrl"}}}),d.useStaticFilesLoader({prefix:"locale/locale-",suffix:".json"}),d.preferredLanguage("zh-TW"),d.useLocalStorage()}]).run(["$rootScope","$state","$stateParams",function(a,b,c){return a.$state=b,a.$stateParams=c,console.log("$state: "),console.log(b),console.log("$stateParams: "),console.log(c)}]),b.service("notifyMassage",function(){return this.alert=function(a,b){var c;switch(c={text:b,addclass:"custom",opacity:.8,nonblock:!0,nonblock_opacity:.2},a){case"error":c.title="Sorry",c.icon="icon-warning-sign icon-2x icon-light",c.type="error";break;case"info":c.title="Tips",c.icon="icon-info-sign icon-2x icon-light",c.type="info";break;case"success":c.title="Success",c.icon="icon-thumbs-up icon-2x icon-light",c.type="success";break;case"debug":c.title="Debug Message",c.icon="icon-thumbs-up icon-2x icon-light",c.type="success"}return $.pnotify.defaults.history=!1,$.pnotify(c)}}),b.factory("posts",["$http",function(b,c){var d,e,f;return e=a+"/list.json",f=b.get(e).then(function(a){return a.data.data.items}),d={},d.all=function(){return f},d.get=function(a){return f.then(function(){return c.findById(f,a)})},d.next=function(a){return f.then(function(){return c.findNextById(f,a)})},d}]),b.factory("utils",function(){var a,b,c;return{findById:a=function(a,b){var c;for(c=0;c<a.length;){if(a[c].id===b)return a[c];c++}return null},findNextById:b=function(a,b){var c;for(c=0;c<a.length;){if(a[c].id===b)return a[c-1];c++}return null},newRandomKey:c=function(a,b,c){var d;for(d=void 0;d=a[Math.floor(a.length*Math.random())][b],d===c;);return d}}})}.call(this),function(){"use strict";var a;a=angular.module("NextBBSWebApp"),a.controller("MainCtrl",["$scope","$state",function(a){return a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"],console.log("main controller()")}])}.call(this),function(){"use strict";var a;a=angular.module("NextBBSWebApp"),a.controller("HomeCtrl",["$scope","$state","notifyMassage",function(a){return a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"],console.log("home controller()")}])}.call(this),function(){"use strict";var a;a=angular.module("NextBBSWebApp"),a.controller("NavCtrl",["$scope","$state","notifyMassage",function(){return Mousetrap.bind("y",function(){return console.log("y")}),Mousetrap.bind("h",function(){return console.log("h")})}])}.call(this),function(){"use strict";var a;a=angular.module("NextBBSWebApp"),a.controller("ListCtrl",["$scope","$state","$document","notifyMassage","posts","utils",function(a,b,c,d,e,f){return a.posts=e,a.postItemSelected=function(a){return b.go("root.nav.board.list.post",{postId:a})},angular.element(c).bind("keyup",function(c){var d;return 74===c.which?(d=f.findNextById(a.posts,b.params.postId),console.log(d)):75===c.which&&console.log("k"),b.go("root.nav.board.list.post",{postId:d.id})})}])}.call(this),function(){"use strict";var a;a=angular.module("NextBBSWebApp"),a.controller("ContentCtrl",["$scope","$state","notifyMassage",function(a,b,c){return Mousetrap.bind("o",function(){return window.scrollTo(0,document.documentElement.scrollTop-$(window).height()+20)}),Mousetrap.bind("l",function(){return window.scrollTo(0,document.documentElement.scrollTop+$(window).height()-20)}),Mousetrap.bind("right",function(){return Mousetrap.trigger("l")}),Mousetrap.bind("left",function(){return Mousetrap.trigger("o")}),c.alert("debug","loading post:"+b.params.postId)}])}.call(this);