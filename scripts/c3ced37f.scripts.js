!function(){"use strict";var a,b;a="/api_mock",b=angular.module("NextBBSWebApp",["ui.router","ngCookies","pascalprecht.translate"]),b.config(["$stateProvider","$routeProvider","$urlRouterProvider","$translateProvider",function(a,b,c,d){return c.when("/p?id","/posts/:id").when("/b?id","/board/:id").when("/u?id","/user/:id").otherwise("/"),b.when("/user/:id",{redirectTo:"/posts/:id"}),a.state("home",{url:"/","abstract":!0,templateUrl:"views/layout.html",controller:"HomeCtrl"}).state("home.welcome",{url:"",views:{board:{templateUrl:"views/board.html",controller:"BoardCtrl"},list:{templateUrl:"views/list.html",controller:"ListCtrl"},"":{templateUrl:"views/post.html",controller:"PostCtrl"}}}).state("home.board",{url:"board/:boardId",views:{board:{templateUrl:"views/board.html",controller:"BoardCtrl"},list:{templateUrl:"views/list.html",controller:"ListCtrl"},"":{templateUrl:"views/post.html",controller:"PostCtrl"}}}).state("home.post",{url:"post/:postId",views:{board:{templateUrl:"views/board.html",controller:"BoardCtrl"},list:{templateUrl:"views/list.html",controller:"ListCtrl"},"":{templateUrl:"views/post.html",controller:"PostCtrl"}}}).state("posts",{url:"/posts","abstract":!0,templateUrl:"views/post.html",controller:"PostsCtrl"}).state("posts.list",{url:"",templateUrl:"views/posts_list.html"}).state("posts.detail",{url:"/{contactId}",resolve:{something:["$timeout","$stateParams",function(a,b){return a(function(){return"Asynchronously resolved data ("+b.contactId+")"},10)}]},views:{"":{templateUrl:"posts.detail.html",controller:["$scope","$stateParams","something",function(a,b,c){return a.something=c,a.contact=findById(a.posts,b.contactId)}]},"hint@":{template:"This is posts.detail populating the view 'hint@'"},menu:{templateProvider:["$stateParams",function(a){return"<hr><small class='muted'>Contact ID: "+a.contactId+"</small>"}]}}}).state("posts.detail.item",{url:"/item/:itemId",views:{"":{templateUrl:"posts.detail.item.html",controller:["$scope","$stateParams","$state",function(a,b,c){return a.item=findById(a.contact.items,b.itemId),a.edit=function(){return c.transitionTo("posts.detail.item.edit",b)}}]},"hint@":{template:"Overriding the view 'hint@'"}}}).state("posts.detail.item.edit",{views:{"@posts.detail":{templateUrl:"posts.detail.item.edit.html",controller:["$scope","$stateParams","$state",function(a,b,c){return a.item=findById(a.contact.items,b.itemId),a.done=function(){return c.transitionTo("posts.detail.item",b)}}]}}}).state("about",{url:"/about",templateProvider:["$timeout",function(a){return a(function(){return"Hello world"},100)}]}),d.useStaticFilesLoader({prefix:"locale/locale-",suffix:".json"}),d.preferredLanguage("zh-TW"),d.useLocalStorage()}]).run(["$rootScope","$state","$stateParams",function(a,b,c){return a.$state=b,a.$stateParams=c,console.log("$state: "),console.log(b),console.log("$stateParams: "),console.log(c)}]),b.service("notifyMassage",function(){return this.alert=function(a,b){var c;switch(c={text:b,addclass:"custom",opacity:.8,nonblock:!0,nonblock_opacity:.2},a){case"error":c.title="Sorry",c.icon="icon-warning-sign icon-2x icon-light",c.type="error";break;case"info":c.title="Tips",c.icon="icon-info-sign icon-2x icon-light",c.type="info";break;case"success":c.title="Success",c.icon="icon-thumbs-up icon-2x icon-light",c.type="success";break;case"debug":c.title="Debug Message",c.icon="icon-thumbs-up icon-2x icon-light",c.type="success"}return $.pnotify.defaults.history=!1,$.pnotify(c)}}),b.factory("postFactory",["$http",function(b){return{getList:function(){return console.log("loading"),b.get(a+"/list.json")}}}])}.call(this),function(){"use strict";var a;a=angular.module("NextBBSWebApp"),a.controller("MainCtrl",["$scope","$state",function(a){return a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"],console.log("main controller()")}])}.call(this),function(){"use strict";var a;a=angular.module("NextBBSWebApp"),a.controller("HomeCtrl",["$scope","$state","notifyMassage",function(a){return a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"],console.log("home controller()")}])}.call(this),function(){"use strict";var a;a=angular.module("NextBBSWebApp"),a.controller("BoardCtrl",["$scope","$state","notifyMassage",function(){return Mousetrap.bind("y",function(){return console.log("y")}),Mousetrap.bind("h",function(){return console.log("h")})}])}.call(this),function(){"use strict";var a;a=angular.module("NextBBSWebApp"),a.controller("ListCtrl",["$scope","$state","notifyMassage","postFactory",function(a,b,c,d){return d.getList().success(function(b){return a.posts=b.data.items,console.log("getList()")}).error(function(a){return c.alert("error","load list faild:\r\n"+a.msg)}),a.postItemSelected=function(a){return b.go("home.post",{postId:a})}}])}.call(this),function(){"use strict";var a;a=angular.module("NextBBSWebApp"),a.controller("PostCtrl",["$scope","$state","notifyMassage",function(a,b,c){return Mousetrap.bind("o",function(){return window.scrollTo(0,document.documentElement.scrollTop-$(window).height()+20)}),Mousetrap.bind("l",function(){return window.scrollTo(0,document.documentElement.scrollTop+$(window).height()-20)}),Mousetrap.bind("right",function(){return Mousetrap.trigger("l")}),Mousetrap.bind("left",function(){return Mousetrap.trigger("o")}),c.alert("debug","loading post:"+b.params.postId)}])}.call(this);